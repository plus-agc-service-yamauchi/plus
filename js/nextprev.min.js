document.addEventListener("DOMContentLoaded",function(){"webkitClipPath"in document.body.style||alert("Sorry, this demo is available just with webkitClipPath. Try with Chrome/Safari."),Barba.Pjax.init(),Barba.Prefetch.init();var t=!1;document.addEventListener("mouseover",function(t){e(t.target,100)}),document.addEventListener("mouseout",function(t){e(t.target,40)});var e=function(e,i){if(!t&&e.classList.contains("nav")){var n=e.classList.contains("next")?"97":"3";TweenLite.to(e,.3,{webkitClipPath:"circle("+i+"px at "+n+"% 50%)"})}},i=Barba.BaseTransition.extend({start:function(){t=!0,Promise.all([this.newContainerLoading,this.scrollTop()]).then(this.display.bind(this))},scrollTop:function(){var t=Barba.Utils.deferred(),e={y:window.pageYOffset};return TweenLite.to(e,.4,{y:0,onUpdate:function(){0===e.y&&t.resolve(),window.scroll(0,e.y)},onComplete:function(){t.resolve()}}),t.promise},getNewPageFile:function(){return Barba.HistoryManager.currentStatus().url.split("/").pop()},getLinkByHref:function(t){return document.querySelector('a[href="'+t+'"]')},display:function(){var e=this,i=new TimelineMax({onComplete:function(){e.newContainer.style.position="static",e.done(),t=!1}}),n=window.innerWidth,a=this.oldContainer.querySelector(".text"),o=this.newContainer.querySelector(".text"),r=this.newContainer.querySelector(".nav.prev"),s=this.newContainer.querySelector(".nav.next"),c=this.getLinkByHref(this.getNewPageFile()),l=c.classList.contains("next")?"97":"3";TweenLite.set(c,{zIndex:100}),TweenLite.set(this.newContainer,{position:"fixed",visibility:"visible",top:0,right:0,bottom:0,left:0,opacity:0,zIndex:200}),TweenLite.set(o,{opacity:0}),TweenLite.set(r,{webkitClipPath:"circle(0px at 3% 50%)"}),TweenLite.set(s,{webkitClipPath:"circle(0px at 97% 50%)"}),i.add("start"),i.to(a,.3,{opacity:0},"start"),i.to(c,1,{webkitClipPath:"circle("+n+"px at "+l+"% 50%)"},"start"),i.to(this.newContainer,.3,{opacity:1}),i.to(o,.3,{opacity:1}),i.add("nextLinks"),i.to(r,.2,{webkitClipPath:"circle(40px at 3% 50%)"},"nextLinks"),i.to(s,.2,{webkitClipPath:"circle(40px at 97% 50%)"},"nextLinks")}});Barba.Pjax.getTransition=function(){return i}});